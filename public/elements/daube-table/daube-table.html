<link rel="stylesheet" href="../shared.css">
<template id="daube-table">
  <style>
    :host { font-size: 1rem; }
    table {
      width: 100%;
    }
    thead tr th {
      font-size: 0.95rem;
      color: rgba(0,0,0,0.54);
    }
    tbody tr:hover{
      background-color: rgba(0,0,0,0.05);
    }
    tbody tr td, .bookroom {
      border-top: 1px solid rgba(0,0,0,0.2);
      color: var(--text-primary-black);
      text-align: center;
      padding-top: .35rem;
      padding-bottom: .3rem;
    }

    .bookroom {
      font-size: 2rem;
    }
    .bookroom:hover {
      cursor: pointer;
      color: var(--primary-color);
      font-size: 2rem;
      font-weight: 900;
    }
    .alignleft {
      text-align: left;
    }


    tbody tr td.no {
      color: rgba(0,0,0,0.25);
    }
  </style>
  <slot></slot>
  <table>
    <thead>
      <tr>
        <th class="alignleft">Name</th>
        <th>This hour</th>
        <th>Next 30 minutes</th>
        <th>Next hour</th>
      </tr>
    </thead>
    <tbody>
      <tr id="glab.redhat.com_2d33373132303538392d323637@resource.calendar.google.com">
        <td class="alignleft">14-14n120-avLab</td>
        <td class="thishour bookroom">▢</td>
        <td class="nextthirty bookroom">▢</td>
        <td class="nexthour no">—</td>
      </tr>
      <tr id="glab.redhat.com_72616c656967682d3230573230342d726f6f66@resource.calendar.google.com">
        <td class="alignleft">20W204-roof</td>
        <td class="thishour no">—</td>
        <td class="nextthirty bookroom">▢</td>
        <td class="nexthour bookroom">▢</td>
      </tr>
      <tr id="glab.redhat.com_2d3734363632303333383533@resource.calendar.google.com">
        <td class="alignleft">20e351-rooftop</td>
        <td class="thishour bookroom">▢</td>
        <td class="nextthirty no">—</td>
        <td class="nexthour no">—</td>
      </tr>
      <tr id="glab.redhat.com_7264752d392d39733431302d736861646f776d616e2d67383165796533333061@resource.calendar.google.com">
        <td class="alignleft">9s410-shadowman-14-p-vc</td>
        <td class="thishour bookroom">▢</td>
        <td class="nextthirty bookroom">▢</td>
        <td class="nexthour no">—</td>
      </tr>
    </tbody>
  </table>
</template>
<script>
  (function() {
    let thisImportDoc = document.currentScript.ownerDocument;
    class DaubeTable extends HTMLElement {
      static get observedAttributes() {}
      constructor() {
        super();
        var shadowRoot = this.initShadowDom();
      }
      static get template() {
        if (!this._template) {
          this._template = thisImportDoc.querySelector('#daube-table')
        }
        return this._template;
      }
      connectedCallback() {
        this.shadowRoot.addEventListener('click', e => {
          this.bookRoom(e);
        });
      }
      bookRoom(e) {
        console.log('book room event dispatched');
        var tag = e.target;
        var compPath = e.composedPath();
        console.log(compPath);
        tag.dispatchEvent(new CustomEvent('book-room-clicked', {
          detail: {
            path: compPath
          },
          bubbles: true,
          composed: true}));
      }

      initShadowDom() {
        let shadowRoot = this.attachShadow({mode: 'open'});
        let tmpl = DaubeTable.template;
        shadowRoot.appendChild(document.importNode(tmpl.content,true));
        return shadowRoot;
      }
    } // Class DaubeInputText
    customElements.define('daube-table', DaubeTable)
  })();
</script>